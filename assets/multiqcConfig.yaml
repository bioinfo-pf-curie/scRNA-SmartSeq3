#
# SmartSeq3 config for MultiQC
#
#################################################################

skip_generalstats: true
read_count_multiplier: 0.000001
read_count_prefix: 'M'
read_count_desc: 'millions'

###################################
## Custom content

custom_data:
    stats:
      file_format: 'csv'
      section_name: 'General Metrics'
      description: 'of sequenced data'
      plot_type: 'table'
      pconfig:
          namespace: 'stats'
          id: 'stats'
          title: 'General Statistics'
          save_file: true
          col1_header: 'Sample ID'
          headers:
              Sample_name:
                title: 'Sample Name'
                scale: false
                placement: 2000
              Number_of_reads:
                title: 'Total Reads'
                scale: 'YlGnBu'
                format: '{:,.0f}'
                placement: 3000
              Percent_UMIs:
                title: 'UMIs reads (%)'
                min: 0
                max: 100
                scale: 'Purples'
                suffix: '%'
                format: '{:,.1f}'
                placement: 4000
              Percent_Aligned:
                title: 'Aligned (%)'
                min: 0
                max: 100
                scale: 'Greens'
                suffix: '%'
                format: '{:,.1f}'
                placement: 5000
              Percent_Assigned:
                title: 'Assigned (%)'
                min: 0
                max: 100
                scale: 'YlGn'
                suffix: '%'
                format: '{:,.1f}'
                placement: 6000
              nbUmis:
                title: '# UMIs'
                scale: 'Oranges'
                format: '{:,.0f}'
                placement: 7000
              nbGenes:
                title: '# Genes'
                scale: 'RdPu'
                format: '{:,.0f}'
                placement: 8000

    final:
      file_format: 'csv'
      section_name: 'Mapping summary'
      description: 'Overview of mapping steps done on all reads (UMI and non UMI reads). Correct reads are aligned on the genome and assigned to a gene.'
      plot_type: 'bargraph'
      pconfig:
        id: 'final'
        title: 'Mapping summary'

    umiPerGene: 
      file_format: 'csv'
      section_name: 'Number of UMIs per gene'
      description: 'Distribution of the number of UMIs per genes in each sample. Genes having more than 70 UMIs (x axis) are not show cause they are too few.'
      plot_type: 'linegraph'
      pconfig:
        id: 'umiPerGene'
        title: ''
        xlab: 'Number of UMIs per gene'
        xmax: 70
        ylab: 'Number of genes'
        #xLog: True
        #logswitch: True
        #logswitch_active: True
        #logswitch_label: 'Log10'
        #reversedStacks: True

    nbGene_perCell: 
      file_format: 'csv'
      section_name: 'Number of genes per cell'
      description: 'Genes are those found in umi matrices.'
      plot_type: 'bargraph'
      pconfig:
        id: 'nbGene_perCell'
        title: 'Number of genes per cell'

    nbUmi_perCell: 
      file_format: 'csv'
      section_name: 'Number of UMIs per cell'
      description: ''
      plot_type: 'bargraph'
      pconfig:
        id: 'nbUmi_perCell'
        title: 'Number of UMIs per cell'
        
    ratio: 
      file_format: 'csv'
      section_name: 'Ratio of the number of genes and UMIs per cell'
      description: ''
      plot_type: 'scatter'
      pconfig:
        id: 'ratio'
        title: 'Number of genes and UMIs per cell'
        xlab: 'Number of UMIs'
        ylab: 'Number of genes'

    mt: 
      file_format: 'csv'
      section_name: 'Percentage of mitochondrial genes per cell'
      description: 'Percentage of mitochondrial genes is a cell viability marker. Here, only UMI reads are take into account.'
      plot_type: 'scatter'
      pconfig:
        id: 'mt'
        title: 'Percentage of mitochondrial genes per cell'
        xlab: 'Number of genes'
        ylab: '% mitochondrial genes'

sp:
  stats:
      fn: 'table_mqc.stats'
  final:
      fn: 'final_mqc.stats'
  umiPerGene:
      fn: '*_HistUMIperGene_mqc.csv'
  nbGene_perCell:
      fn: 'nbGenePerCell.csv'
  nbUmi_perCell:
      fn: 'nbUMIPerCell.csv'
  ratio:
      fn: 'RatioPerCell.csv'
  mt:
      fn: 'MtGenePerCell.csv'


###############################
## Modules 

module_order:
  - cutadapt
  - star:
      name: 'Read alignments'
      info: 'Each read is aligned on a reference genome using the STAR software.'
  - featurecounts:
      name: 'Read assignments'
      info: 'Each aligned read is assigned to a gene using the featureCounts software.'
  - deeptools
  - rseqc

#############################
## Display

report_section_order:
  # summary table
  stats:
    order: 850
  # mapping:
  final:
    order: 800
  star:
    order: 750
  featurecounts:
    order: 700
  cutadapt:
    order: 650
  rseqc:
    order: 550
  # cell analysis
  umiPerGene:
    order: 500
  nbGene_perCell:
    order: 450
  nbUmi_perCell:
    order: 400
  ratio:
    order: 350
  mt:
    order: 300
  software_versions:
    order: -1500
  summary:
    order: -2000

plots_force_interactive: True
